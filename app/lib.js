!function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},r={},n={},o={}.hasOwnProperty,i=/^\.\.?(\/|$)/,a=function(t,e){for(var r,n=[],o=(i.test(e)?t+"/"+e:e).split("/"),a=0,u=o.length;u>a;a++)r=o[a],".."===r?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},u=function(t){return t.split("/").slice(0,-1).join("/")},s=function(e){return function(r){var n=a(u(e),r);return t.require(n,e)}},l=function(t,e){var n={id:t,exports:{}};return r[t]=n,e(n.exports,s(t),n),n.exports},c=function(t){return n[t]?c(n[t]):t},f=function(t,n){null==n&&(n="/");var i=c(t);if(o.call(r,i))return r[i].exports;if(o.call(e,i))return l(i,e[i]);throw new Error("Cannot find module '"+t+"' from '"+n+"'")};f.alias=function(t,e){n[e]=t},f.reset=function(){e={},r={},n={}};var y=/\.[^.\/]+$/,d=/\/index(\.[^\/]+)?$/,p=function(t){if(y.test(t)){var e=t.replace(y,"");o.call(n,e)&&n[e].replace(y,"")!==e+"/index"||(n[e]=t)}if(d.test(t)){var r=t.replace(d,"");o.call(n,r)||(n[r]=t)}};f.register=f.define=function(t,n){if("object"==typeof t)for(var i in t)o.call(t,i)&&f.register(i,t[i]);else e[t]=n,delete r[t],p(t)},f.list=function(){var t=[];for(var r in e)o.call(e,r)&&t.push(r);return t},f.brunch=!0,f._cache=r,t.require=f}}(),require.register("lib/fsm.js",function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){return new u(t)}function u(t){t=p.Cfg.resolve(t);var e={symbols:new Map,states:new Map,transitions:new Map},r=this,n=function(){function t(){i(this,t)}return l(t,[{key:"struct",get:function(){return r}}],[{key:"all",value:function(){return g(e)}},{key:"add",value:function(){return v({},new this(arguments),e)}},{key:"remove",value:function(t){return t=p.Symbol.remove.resolve(t),d["default"].error(t)?t:(O(t,e),r)}}]),t}();n=t.mixins.symbols(n);var o=function(){function t(){i(this,t)}return l(t,[{key:"struct",get:function(){return r}},{key:"initial",get:function(){return e.states.get(this).initial}},{key:"terminal",get:function(){return e.states.get(this).terminal}}],[{key:"all",value:function(){return w(e)}},{key:"remove",value:function(t){return d["default"].error(t)?t:(k(t,e),r)}},{key:"add",value:function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;r>o;o++)n[o-1]=arguments[o];return t=Object.assign({},t),d["default"].error(t)?t:b(t,new this(arguments),e)}}]),t}();o=t.mixins.states(o);var a=function(){function t(){i(this,t)}return l(t,[{key:"struct",get:function(){return r}},{key:"from",get:function(){return e.transitions.get(this).from}},{key:"to",get:function(){return e.transitions.get(this).to}},{key:"by",get:function(){return e.transitions.get(this).by}}],[{key:"all",value:function(){return j(e)}},{key:"get",value:function(t){return t=Object.assign({},t),d["default"].error(t)?t:m(t.from,t.to,t.by,e)}},{key:"add",value:function(t){return t=Object.assign({},t),d["default"].error(t)?t:h(t,new this(arguments),e)}},{key:"remove",value:function(t){return d["default"].error(t)?t:(x(t),r)}},{key:"select",value:function(t){if(t=Object.assign({},t),d["default"].error(t))return t;var r=[],n=j;return null!=t.from&&(n=n.from,r.push(t.from)),null!=t.to&&(n=n.to,r.push(t.to)),null!=t.by&&(n=n.by,r.push(t.by)),r.push(e),n.apply(null,r)}},{key:"groups",value:function(){return j.groups(e)}}]),t}();n=t.mixins.symbols(n),o=t.mixins.states(o),a=t.mixins.transitions(a),this.symbols=n,this.states=o,this.transitions=a}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(s){o=!0,i=s}finally{try{!n&&u["return"]&&u["return"]()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();t["default"]=a;var c=e("./utils/iterator"),f=o(c),y=e("./utils/check"),d=n(y),p={};p.Mixin=(0,d["default"])().instanceOf(Function),p.FsmMixins=(0,d["default"])().object({symbols:p.Mixin,states:p.Mixin,transitions:p.Mixin}),p.Cfg=(0,d["default"])().object({mixins:p.FsmMixins});var v=function(t,e,r){return t.tran=new Set,r.symbols.set(e,t),e},b=function(t,e,r){return t.succ=new Map,t.pred=new Map,r.states.set(e,t),e},h=function(t,e,r){var n=r.states.get(t.from).succ,o=n.get(t.to);null==o&&(o=new Map,n.set(t.to,o));var i=o.get(t.by);if(null==i){i=e,o.set(t.by,i);var a=r.states.get(t.to).pred,u=a.get(t.by);null==u&&(u=new Set,a.set(t.by,u)),u.add(i),r.symbols.get(t.by).tran.add(i),r.transitions.set(i,t)}return i},m=function(t,e,r,n){var o=n.states.get(t).succ.get(e);return null==o?null:o.get(r)},g=function(t){return t.symbols.keys()},w=function(t){return t.states.keys()},j=function(t){return t.transitions.keys()};j.groups=function(){return f.apply(data.states.entries(),function(t){var e=s(t,2),r=e[0],n=e[1],o=f.apply(n.entries(),function(t){var e=s(t,2),r=e[0],n=e[1],o=n.values();return o.to=r,o});return o.from=r,o})},j.from=function(t){return f.flatten(data.states.get(t).succ.values(),function(t){return t.values()})},j.to=function(t){return states.get(t).pred.values()},j.by=function(t){return symbols.get(t).transitions.values()},j.from.to=function(t,e){return states.get(t).succ.get(e).values()},j.to.by=function(t,e){return states.get(t).pred.get(e).values()},j.from.by=function(t,e){return f.flatten(states.get(t).succ.values(),function(t){var r=t.get(e);return null==r?f.empty():f.wrap(r)})},j.from.to.by=function(t,e,r,n){var o=m(t,e,r,n);return null==o?f.empty():f.wrap(o)};var O=function(t,e){var r=!0,n=!1,o=void 0;try{for(var i,a=j.by(t)[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=i.value,s=e.transitions.get(u);e.states.get(s.from).succ.get(s.from)["delete"](t),e.states.get(s.to).pred["delete"](t),e.transitions["delete"](u)}}catch(l){n=!0,o=l}finally{try{!r&&a["return"]&&a["return"]()}finally{if(n)throw o}}e.symbols["delete"](t)},k=function(t,e){var r=!0,n=!1,o=void 0;try{for(var i,a=j.to(t)[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=i.value,s=e.transitions.get(u);e.states.get(s.to).succ["delete"](t),e.symbols.get(s.by).transitions["delete"](u),e.transitions["delete"](u)}}catch(l){n=!0,o=l}finally{try{!r&&a["return"]&&a["return"]()}finally{if(n)throw o}}var c=!0,f=!1,y=void 0;try{for(var d,p=j.from(t)[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var v=d.value,b=e.transitions.get(v);e.states.get(b.from).pred.get(b.by)["delete"](v),e.symbols.get(b.by).transitions["delete"](v),e.transitions["delete"](v)}}catch(l){f=!0,y=l}finally{try{!c&&p["return"]&&p["return"]()}finally{if(f)throw y}}e.states["delete"](t)},x=function(t,e){var r=e.transitions.get(t);null!=r&&(e.states.get(r.from).succ.get(r.to)["delete"](r.by),e.states.get(r.to).pred.get(r.by)["delete"](t),e.symbols.get(r.by).transitions["delete"](t),e.transitions["delete"](t))}}),require.register("lib/json.js",function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t){var e=JSON.parse(t);return e.symbols=e.alphabet,delete e.alphabet,(0,s["default"])({descriptor:e})}function i(t){var e=(0,a.fsmToTree)(t);return JSON.stringify(e,null,2)}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=o,t.serialize=i;var a=e("./tree"),u=e("./sketchFsm"),s=n(u)}),require.register("lib/sketchFsm/checks.js",function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(t,"__esModule",{value:!0}),t.cfg=t.descriptor=t.defaults=t.defaultTransition=t.defaultState=t.defaultSymbol=t.fsmType=t.integer=t.bool=t.color=t.error=void 0;var o=e("../utils/check"),i=n(o),a=t.error={};a.fsmType=i["default"].error.register("WrongFsmType",function(t){this.type=t,this.message="WrongFsmType:       "+t+" is not a valid finite state machine type"});var u=t.color=(0,i["default"])();u.opt=(0,i["default"])().optional().compose(u);var s=t.bool=(0,i["default"])().ofType("boolean");s.opt=(0,i["default"])().optional().compose(s);var l=t.integer=(0,i["default"])();l.opt=(0,i["default"])().optional().compose(l);var c=t.fsmType=(0,i["default"])().defaults("finite-state-machine"),f=t.defaultSymbol=(0,i["default"])().object({color:u.opt,bold:s.opt,italic:s.opt}),y=t.defaultState=(0,i["default"])().object({color:u.opt,"border-color":u.opt,"text-color":u.opt,"background-color":u.opt,bold:s.opt,italic:s.opt,width:l.opt,height:l.opt}),d=t.defaultTransition=(0,i["default"])().object({"text-color":u.opt,bold:s.opt,italic:s.opt}),p=t.defaults=(0,i["default"])().object({symbols:f,states:y,transitions:d}),v=t.descriptor=(0,i["default"])().object({symbols:(0,i["default"])().iterable(),states:(0,i["default"])().iterable(),transitions:(0,i["default"])().iterable()});t.cfg=(0,i["default"])().object({type:c,color:u.opt,"background-color":u.opt,bold:s.opt,italic:s.opt,defaults:p,descriptor:v})}),require.register("lib/sketchFsm/index.js",function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){return new l(t)}function l(t){if(t=d.cfg.resolve(t),v["default"].error(t))return t;var e={color:t.color,bold:t.color,italic:t.color};e.symbols=new WeakMap,e.states=new WeakMap,e.transitions=new WeakMap,e.symbols.labels=new Map;var r=function(t){var r=function(t){function r(){return i(this,r),a(this,Object.getPrototypeOf(r).apply(this,arguments))}return u(r,t),c(r,[{key:"label",get:function(){return e.symbols.get(this).label}},{key:"description",get:function(){for(var t=e.symbols.get(this),r={},n=["label","color","bold","italic"],o=0;o<n.length;o++){var i=n[o];r[i]=t[i]}return r}}],[{key:"add",value:function(t){t=Object.assign({},t);var n=f(Object.getPrototypeOf(r),"add",this).call(this);return v["default"].error(n)?n:(e.symbols.set(n,t),n)}}]),r}(t);return w(r,"symbols",e,{color:{check:d.color},bold:{check:d.bold,"default":!1},italic:{check:d.italic,"default":!1}}),r},n=function(t){var r=function(t){function r(){return i(this,r),a(this,Object.getPrototypeOf(r).apply(this,arguments))}return u(r,t),c(r,[{key:"description",get:function(){var t=e.states.get(this),n={},o=["label","x","y","width","height","color","border-color","text-color","background-color","bold","italic"],i=!0,a=!1,u=void 0;try{for(var s,l=o[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;n[c]=t[c]}}catch(y){a=!0,u=y}finally{try{!i&&l["return"]&&l["return"]()}finally{if(a)throw u}}return n.initial=f(Object.getPrototypeOf(r.prototype),"initial",this),n.terminal=f(Object.getPrototypeOf(r.prototype),"terminal",this),n}}],[{key:"add",value:function(t){t=Object.assign({},t);var n=f(Object.getPrototypeOf(r),"add",this).call(this,{initial:t.initial,terminal:t.terminal});return v["default"].error(n)?n:(e.states.set(n,t),n)}}]),r}(t);return w(r,"states",e,{label:{check:d.string,precedence:[],"default":""},x:{check:d.integer,precedence:[],"default":0},y:{check:d.integer,precedence:[],"default":0},border_color:{check:d.color,precedence:[function(){return e.states.get(this).color},function(){return e.defaults.states["border-color"]},function(){return e.defaults.states.color},function(){return e.color}]},text_color:{check:d.color,precedence:[function(){return e.states.get(this).color},function(){return e.defaults.states["text-color"]},function(){return e.defaults.states.color},function(){return e.color}]},background_color:{check:d.color},bold:{check:d.bool,"default":!1},italic:{check:d.bool,"default":!1},height:{check:d.integer,precedence:[function(){return 60}]},width:{check:d.integer,precedence:[function(){return 60}]}}),r},o=function(t){var r=function(t){function r(){return i(this,r),a(this,Object.getPrototypeOf(r).apply(this,arguments))}return u(r,t),c(r,[{key:"description",get:function(){for(var t=e.transitions.get(this),n={},o=["text-color","bold","italic"],i=0;i<o.length;i++){var a=o[i];n[a]=t[a]}return n.from=f(Object.getPrototypeOf(r.prototype),"from",this),n.to=f(Object.getPrototypeOf(r.prototype),"to",this),n.by=f(Object.getPrototypeOf(r.prototype),"by",this),n}}],[{key:"add",value:function(t){t=Object.assign({},t);var n=f(Object.getPrototypeOf(r),"add",this).call(this,{from:t.from,to:t.to,by:t.by});return v["default"].error(n)?n:(e.transitions.set(n,t),n)}}]),r}(t);return w(r,"transitions",e,{text_color:{check:d.color,precedence:[function(){return e.symbols.get(this.by).color},function(){return e.defaults.transitions.color},function(){return e.defaults.symbols.color},function(){return e.color}],"default":!1},bold:{check:d.bool,precedence:[function(){return e.symbols.get(this.by).bold},function(){return e.defaults.transitions.bold},function(){return e.defaults.symbols.bold},function(){return e.bold}],"default":!1},italic:{check:d.bool,precedence:[function(){return e.symbols.get(this.by).italic},function(){return e.defaults.transitions.italic},function(){return e.defaults.symbols.italic},function(){return e.italic}],"default":!1}}),r};e.fsm=(0,h["default"])({mixins:{symbols:r,states:n,transitions:o}}),this.symbols=e.fsm.symbols,this.states=e.fsm.states,this.transitions=e.fsm.transitions;var s=g(t.descriptor,this);return v["default"].error(s)?s:void 0}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=function O(t,e,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:O(o,e,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};t["default"]=s;var y=e("./checks"),d=o(y),p=e("../utils/check"),v=n(p),b=e("../fsm"),h=n(b),m=function(){return Math.random().toString(36).substring(2)},g=function(t,e){var r={},n=new Set,o=!1,i=(0,v["default"])().iterable((0,v["default"])().add(function(t){var r=e.symbols.add(t);return v["default"].error(r)||n.add(r.label),r})).resolve(t.symbols);if(v["default"].error(i)){var a={};r.symbols=i,i=i.output;for(var u,s=0;s<i.length;s++)if(void 0===symErrors[s]){do a.label=m();while(n.has(a.label));if(u=e.symbols.add(a),v["default"].error(u))throw u;i[s]=u}o=!0}var l=(0,v["default"])().iterable((0,v["default"])().add(function(t){return e.states.add(t)})).resolve(t.states);if(v["default"].error(l)){var c={};r.states=l,l=l.output;for(var f,y=0;y<l.length;y++){if(f=e.states.add(c),v["default"].error(f))throw f;l[y]=f}o=!0}var d=(0,v["default"])().iterable((0,v["default"])().add(function(t){var r=Object.assign({},t);return r.from=l[t.from],r.to=l[t.to],r.by=i[t.by],e.transitions.add(r)})).resolve(t.transitions);return v["default"].error(d)&&(r.transitions=d,d=d.output,o=!0),o?(0,v["default"])().object({symbols:(0,v["default"])(),states:(0,v["default"])(),transitions:(0,v["default"])()}).resolve(r):void 0},w=function(t,e,r,n){var o=void 0,i=!0,a=!1,u=void 0;try{for(var s,l=Object.keys(n)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;o=n[c],j(t,e,c.replace("_","-"),c,o.check,r,o.precedence,o["default"])}}catch(f){a=!0,u=f}finally{try{!i&&l["return"]&&l["return"]()}finally{if(a)throw u}}},j=function(t,e,r,n,o,i,a,u){void 0===a&&(a=[function(){return i.defaults[e][r]},function(){return i[r]}]),void 0!==u&&a.push(function(){return u}),a.unshift(function(){return i[e].get(this)[r]}),t[n]=function(t){return void 0===t?precedence.lazy(this,a):(t=o.resolve(t),error(t)?t:(i[e].get(this)[r]=t,this))}}}),require.register("lib/style.js",function(t,e,r){"use strict";function n(t){var e=(new WeakMap,new WeakMap,new WeakMap,{}),r={},n={};Object.defineProperties(t.statePrototype,{}),Object.defineProperties(t.transitionPrototype,{}),Object.defineProperties(t.symbolPrototype,{});var o=t.state;t.state=function(t){var r=o(t);Object.assign({},e);return r};var i=t.transition;t.transition=function(t){var e=i(t);Object.assign({},r);return e};var a=t.symbol;return t.symbol=function(t){var e=a(t);Object.assign({},n);return e},t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n}),require.register("lib/tree.js",function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(t,"__esModule",{value:!0}),t.fsmToTree=t.fsmFromTree=void 0;var o=e("./sketchFsm"),i=n(o);t.fsmFromTree=function(t){var e=(0,i["default"])();t.states.forEach(function(t){null==t.initial&&(t.initial=!1),null==t.terminal&&(t.terminal=!1),e.states.add(t)}),t.alphabet.forEach(function(t){e.symbols.add(t)});var r=Array.from(e.states.all()),n=Array.from(e.symbols.all());return t.transitions.forEach(function(t){t.from=r[t.from],t.to=r[t.to],t.by=n[t.by],e.transitions.add(t)}),e},t.fsmToTree=function(t){var e={type:"finite-state-machine",alphabet:[],states:[],transitions:[]},r={alphabet:new Map,states:new Map},n=0,o=!0,i=!1,a=void 0;try{for(var u,s=t.symbols.all()[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var l=u.value;e.alphabet.push(l.description),r.alphabet.set(l,n++)}}catch(c){i=!0,a=c}finally{try{!o&&s["return"]&&s["return"]()}finally{if(i)throw a}}n=0;var f=!0,y=!1,d=void 0;try{for(var p,v=t.states.all()[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var b=p.value;e.states.push(b.description),r.states.set(b,n++)}}catch(c){y=!0,d=c}finally{try{!f&&v["return"]&&v["return"]()}finally{if(y)throw d}}var h=!0,m=!1,g=void 0;try{for(var w,j=t.transitions.all()[Symbol.iterator]();!(h=(w=j.next()).done);h=!0){var O=w.value,k=O.description;k.from=r.states.get(O.from),k.to=r.states.get(O.to),k.by=r.states.get(O.by),e.transitions.push(k)}}catch(c){m=!0,g=c}finally{try{!h&&j["return"]&&j["return"]()}finally{if(m)throw g}}return e}}),require.register("lib/utils/check.js",function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return new u(t)}function a(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return a.d.value=t,a.d.writable=e,a.d}function u(){Object.defineProperty(this,S,a([]))}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();t["default"]=i;var c=e("./exception"),f=n(c),y=function(){function t(e,r){o(this,t),this.value=e,this.collection=r}return l(t,[{key:"message",get:function(){return this.name+": not a member of the supplied collection"}}]),t}(),d=function(){function t(e,r){o(this,t),this.value=e,this.type=r}return l(t,[{key:"message",get:function(){return this.name+": should be of type "+this.type}}]),t}(),p=function(){function t(e,r){o(this,t),this.value=e,this.classConstructor=r}return l(t,[{key:"message",get:function(){return this.name+": not an instance of the given class/constructor"}}]),t}(),v=function(){function t(e){var r=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];o(this,t),this.value=e,this.allowNull=r}return l(t,[{key:"message",get:function(){return this.name+": undefined "+(this.allowNull?"":"or null")+",      but variable is "+this.value}}]),t}(),b=function(){function t(e,r,n){o(this,t),this.value=e,this.definition=r,this.propertyName=n}return l(t,[{key:"message",get:function(){return this.name+": the property "+this.propertyName+" has not been defined"}}]),t}(),h=new Set;i.error=function(t){return null==t?!1:h.has(t.token)},i.error.register=function(t,e){var r=f.register(t,e);return h.add(r),r},i.error.create=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;e>n;n++)r[n-1]=arguments[n];if(!h.has(t))throw new Error("Not a recognized check error");return create.apply(void 0,[t].concat(r))};var m=function(t,e,r){void 0===r&&(r=t.constructor.name);var n=i.error.register(r,t);i.error[e]=n};m(f.create(f.array).constructor,"array","ArrayCheckErrors"),m(f.create(f.object).constructor,"object","ObjectCheckErrors"),m(v,"missingValue"),m(y,"notMember"),m(p,"wrongClass"),m(d,"wrongType"),m(b,"unknownProp");var g=!0,w=!1,j=void 0;try{for(var O,k=Object.keys(i.error)[Symbol.iterator]();!(g=(O=k.next()).done);g=!0){var x=O.value;h.add(x)}}catch(P){w=!0,j=P}finally{try{!g&&k["return"]&&k["return"]()}finally{if(w)throw j}}var S=Symbol("queue property name"),_={};_.inMap=function(t){var e=this;return t.has(e)?e:f.create(i.error.notMember,e,t)},_.inSet=_.inMap,_.inArray=function(t){var e=this;return t.includes(e)?e:f.create(i.error.notMember,e,t)},_.ofType=function(t){var e=this;return("undefined"==typeof e?"undefined":s(e))===t?e:f.create(i.error.wrongType,e,t)},_.instanceOf=function(t){var e=this;return e instanceof t?e:f.create(i.error.wrongClass,e,t)},_.object=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],r=null==this?{}:this,n={},o={},a=void 0,u=!0,s=!1,l=void 0;try{for(var c,y=Object.keys(t)[Symbol.iterator]();!(u=(c=y.next()).done);u=!0){var d=c.value;void 0!==t[d]&&(a=t[d].resolve(r[d]),i.error(a)?o[d]=a:n[d]=a)}}catch(p){s=!0,l=p}finally{try{!u&&y["return"]&&y["return"]()}finally{if(s)throw l}}if(e){var v=!0,b=!1,h=void 0;try{for(var m,g=Object.keys(r)[Symbol.iterator]();!(v=(m=g.next()).done);v=!0){var w=m.value;t.hasOwnProperty(w)||(exception[w]=f.create(i.error.unknownProp,r,t,w))}}catch(p){b=!0,h=p}finally{try{!v&&g["return"]&&g["return"]()}finally{if(b)throw h}}}return Object.keys(o).length>0?f.create(i.error.object,r,t,o):n},_.iterable=function(t){var e=null==this?[]:this,r=[],n=[];if(null==e[Symbol.iterator])return f.create(i.error.wrongType,e,"iterable");if(void 0===t)return e;var o=0,a=!0,u=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var y=l.value,d=t.resolve(y);i.error(d)?r[o]=d:n[o]=d,o++}}catch(p){u=!0,s=p}finally{try{!a&&c["return"]&&c["return"]()}finally{if(u)throw s}}return r.length>0?(r.length=o,n.length=o,f.create(i.error.array,e,i,r,n)):n},_.mandatory=function(){var t=this;return null==t?new v(t):t},a.d={enumerable:!1,configurable:!1};var M={},T=function(t,e){return function(r){return t.apply(r,e)}},E=function(t){var e=!0,r=!1,n=void 0;try{for(var o,a=this[S][Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var u=o.value;if(i.error(t))return t;if(u.bypass&&null==t)return u.call(void 0,t);t=u.call(void 0,t)}}catch(s){r=!0,n=s}finally{try{!e&&a["return"]&&a["return"]()}finally{if(r)throw n}}return t};M.resolve=E,M.hold=function(){return E.bind(this)},M.compose=function(t){var e=this[S],r=!0,n=!1,o=void 0;try{for(var i,a=t[S][Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=i.value;e.push(u)}}catch(s){n=!0,o=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(n)throw o}}return this},M.add=function(t){return this[S].push(t),this};var q=function(t){return t};q.bypass=!0,M.optional=function(){return this[S].push(q),this},M.defaults=function(t){var e=function(){return t};return e.bypass=!0,this[S].push(e),this};var A=function(t){return function(){for(var e=arguments.length,r=Array(e),n=0;e>n;n++)r[n]=arguments[n];return this[S].push(T(_[t],r)),this}},F=!0,C=!1,N=void 0;try{for(var W,z=Object.keys(_)[Symbol.iterator]();!(F=(W=z.next()).done);F=!0){var I=W.value;Object.defineProperty(u.prototype,I,a(A(I)))}}catch(P){C=!0,N=P}finally{try{!F&&z["return"]&&z["return"]()}finally{if(C)throw N}}var $=!0,J=!1,R=void 0;try{for(var D,V=Object.keys(M)[Symbol.iterator]();!($=(D=V.next()).done);$=!0){var B=D.value;Object.defineProperty(u.prototype,B,a(M[B]))}}catch(P){J=!0,R=P}finally{try{!$&&V["return"]&&V["return"]()}finally{if(J)throw R}}}),require.register("lib/utils/exception.js",function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return null==t?!1:y.has(t[d])}function u(t){return u.d.value=t,u.d}function s(t){this.name=this.constructor.name,this.value=t}function l(t){var e=arguments.length<=1||void 0===arguments[1]?s:arguments[1],r=function(e){function r(){var e;n(this,r);for(var i=arguments.length,a=Array(i),u=0;i>u;u++)a[u]=arguments[u];var s=o(this,(e=Object.getPrototypeOf(r)).call.apply(e,[this].concat(a)));return s.name=t,s[p]=0,s}return i(r,e),r}(e),a=Symbol(t);return e!==s&&(Object.defineProperties(r.prototype,b),"message"in r.prototype||Object.defineProperty(r.prototype,"message",h),v in r.prototype||Object.defineProperty(r.prototype,v,m)),Object.defineProperty(r.prototype,d,u(a)),y.set(a,r),a}function c(t){var e=y.get(t);if(void 0===e)throw new Error("Not a recognized exception");for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;r>o;o++)n[o-1]=arguments[o];return new(Function.prototype.bind.apply(e,[null].concat(n)))}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();t["default"]=a,t.register=l,t.create=c;var y=new Map,d=Symbol("token property name");u.d={enumerable:!1,configurable:!1,writable:!1};var p=Symbol("depth property name"),v=Symbol("increment depth property name"),b={token:{get:function(){return this[d]},configurable:!1,enumerable:!1},onIt:{value:function(t){return t.call(void 0,this)},writable:!1,configurable:!1,enumerable:!1},dispatch:{value:function(t){if(!y.has(this[d]))throw new Error("Not a recognized exception");var e=t[this[d]];if(null==e&&(e=t["default"],null==e))throw this;return this.onIt(e)},writable:!1,configurable:!1,enumerable:!1}},h={get:function(){return this.name+" raised"},configurable:!0,enumerable:!0},m={value:function(){this[p]++},configurable:!1,enumerable:!0,writable:!1};Object.defineProperties(s.prototype,b),Object.defineProperty(s.prototype,"message",h);var g=function(){function t(e,r,o){n(this,t),this.value=e,this.definition=r,this.exceptions=o,this[v](),this[p]=0}return f(t,[{key:"onProperties",value:function(t){var e,r,n={},o=!0,i=!1,a=void 0;try{for(var u,s=Object.keys(this.exceptions)[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var l=u.value;if(e=t[l],r=this.exceptions[l],null==e)throw r;n[l]=e.call(void 0,r)}}catch(c){i=!0,a=c}finally{try{!o&&s["return"]&&s["return"]()}finally{if(i)throw a}}return n}},{key:"message",get:function(){var t=this.name+": exceptions on the following properties: ",e=!0,r=!1,n=void 0;try{for(var o,i=Object.keys(this.exceptions)[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;t+="\n",t+="  ".repeat(this.exceptions[a][p]),t+=a+": "+this.exceptions[a].message}}catch(u){r=!0,n=u}finally{try{!e&&i["return"]&&i["return"]()}finally{if(r)throw n}}return t}}]),t}();Object.defineProperty(g,v,u(function(){this[p]++;var t=!0,e=!1,r=void 0;try{for(var n,o=Object.keys(this.exceptions)[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var i=n.value;this.exceptions[i][v]()}}catch(a){e=!0,r=a}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw r}}}));var w=function(){function t(e,r,o){n(this,t),this.value=e,this.definition=r,this.exceptions=o,this[v](),this[p]--}return f(t,[{key:"onEach",value:function(t){for(var e,r=[],n=0;n<this.exceptions.length;n++)e=this.exceptions[n],void 0!==e&&(r[n]=t.call(void 0,e,n));return r}},{key:"message",get:function(){var t=this.name+": exceptions on the following indexes: ";exceptions.forEach(function(e,r){null!=e&&(t+="\n",t+="  ".repeat(e[p]),t+="index "+r+": "+e.message)})}}]),t}();Object.defineProperty(w,v,u(function(){this[p]++;var t=!0,e=!1,r=void 0;try{for(var n,o=this.exceptions[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var i=n.value;i[v]()}}catch(a){e=!0,r=a}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw r}}}));t.array=l("ArrayExceptions",w),t.object=l("ObjectExceptions",g)}),require.register("lib/utils/iterator.js",function(t,e,r){"use strict";function o(t,e){var r=t[Symbol.iterator](),n=r.next.bind(r),o=void 0,i=void 0,a={done:!0};return r.next=function(){for(;a.done;){if(o=n(),o.done)return o;i=e(o.value)[Symbol.iterator],a=i.next()}return a},r[Symbol.iterator]=function(){return r},r}function i(){var t={next:function(){return{done:!0}}};return t[Symbol.iterator]=function(){return t},t}function a(t){var e=!1,r={next:function(){return e?{done:!0}:(e=!0,{value:t})}};return r[Symbol.iterator]=function(){return r},r}function u(t,e){var r=t[Symbol.iterator](),o=r.next.bind(r);return r.next=function(){var t=o();return t.done||(t.value=e(t.value)),n},r[Symbol.iterator]=function(){return r},newIterator}Object.defineProperty(t,"__esModule",{value:!0}),t.flatten=o,t.empty=i,t.wrap=a,t.hijack=u}),require.register("lib/utils/precedence.js",function(t,e,r){"use strict";function n(){for(var t=void 0,e=arguments.length,r=Array(e),n=0;e>n;n++)r[n]=arguments[n];for(var o=0;o<r.length,null==t;o++)t=r[o];return t}function o(t,e){for(var r=void 0,n=0;n<callback.length,null==r;n++)r=e[n].apply(t);return r}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,t.lazy=o});